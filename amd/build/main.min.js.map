{"version":3,"file":"main.min.js","sources":["../src/main.js"],"sourcesContent":["import { processText } from './repository';\n\nlet initialized = false;\n\nexport const init = () => {\n    // eslint-disable-next-line no-console\n    console.log(\"The init function was called\");\n\n    if (initialized) {\n        return;\n    }\n\n    initialized = true;\n    // eslint-disable-next-line no-console\n    console.log('Executing init function logic');\n\n    const scanButton = document.getElementById('scan-button');\n    if (scanButton) {\n        // eslint-disable-next-line no-console\n        console.log('scanButton found:', scanButton);\n\n        scanButton.addEventListener('click', function() {\n            // eslint-disable-next-line no-console\n            console.log('Scan button clicked');\n\n            const selectedTextContainer = document.getElementById('selected-text');\n            if (selectedTextContainer) {\n                // eslint-disable-next-line no-console\n                console.log('selectedTextContainer found:', selectedTextContainer);\n                selectedTextContainer.innerHTML = ''; // Clear existing content\n\n                alert('Please select text on the page.');\n\n                const textSelectionHandler = function() {\n                    const selection = window.getSelection();\n                    let selectedText = '';\n\n                    // Iterate through the selected ranges\n                    for (let i = 0; i < selection.rangeCount; i++) {\n                        const range = selection.getRangeAt(i);\n                        const container = document.createElement('div');\n                        container.appendChild(range.cloneContents());\n                        selectedText += container.innerText || container.textContent;\n                    }\n\n                    selectedText = selectedText.replace(/\\s+/g, ' ').trim();\n\n                    // eslint-disable-next-line no-console\n                    console.log('Selected text:', selectedText);\n\n                    if (selectedText !== '') {\n                        // eslint-disable-next-line no-console\n                        console.log('Selected text is not empty:', selectedText);\n\n                        const paragraph = document.createElement('p'); // Create a new paragraph element\n                        paragraph.textContent = selectedText; // Set the text content of the paragraph\n                        selectedTextContainer.appendChild(paragraph); // Append paragraph to selectedTextContainer\n\n                        const pageUrl = window.location.href; // Ensure pageUrl is correctly set\n\n                        processText(selectedText, pageUrl)\n                            .then(response => {\n                                alert('Readability Score: ' + response.readabilityscore);\n                                // eslint-disable-next-line no-console\n                                console.log('Debug Info:', JSON.parse(response.debug_info));\n                                // Display debug info on the page\n                                const debugInfo = JSON.parse(response.debug_info);\n                                const debugParagraph = document.createElement('p');\n                                debugParagraph.innerHTML = `\n                                    <strong>Debug Information:</strong><br>\n                                    Word Count: ${debugInfo.word_count}<br>\n                                    Sentence Count: ${debugInfo.sentence_count}<br>\n                                    Difficult Word Count: ${debugInfo.difficult_word_count}<br>\n                                    Gunning Fog Index: ${debugInfo.gunning_fog_index}\n                                `;\n                                selectedTextContainer.appendChild(debugParagraph);\n                            })\n                            .catch(error => {\n                                // eslint-disable-next-line no-console\n                                console.error('Error:', error);\n                            });\n\n                        document.removeEventListener('mouseup', textSelectionHandler);\n                    } else {\n                        // eslint-disable-next-line no-console\n                        console.log('No text selected');\n                    }\n                };\n\n                document.addEventListener('mouseup', textSelectionHandler);\n                // eslint-disable-next-line no-console\n                console.log('textSelectionHandler added');\n            } else {\n                // eslint-disable-next-line no-console\n                console.log('selectedTextContainer not found');\n            }\n        });\n    } else {\n        // eslint-disable-next-line no-console\n        console.log('scanButton not found');\n    }\n};\n"],"names":["initialized","console","log","scanButton","document","getElementById","addEventListener","selectedTextContainer","innerHTML","alert","textSelectionHandler","selection","window","getSelection","selectedText","i","rangeCount","range","getRangeAt","container","createElement","appendChild","cloneContents","innerText","textContent","replace","trim","paragraph","pageUrl","location","href","then","response","readabilityscore","JSON","parse","debug_info","debugInfo","debugParagraph","word_count","sentence_count","difficult_word_count","gunning_fog_index","catch","error","removeEventListener"],"mappings":"iLAEIA,aAAc,gBAEE,QAEhBC,QAAQC,IAAI,gCAERF,mBAIJA,aAAc,EAEdC,QAAQC,IAAI,uCAENC,WAAaC,SAASC,eAAe,eACvCF,YAEAF,QAAQC,IAAI,oBAAqBC,YAEjCA,WAAWG,iBAAiB,SAAS,WAEjCL,QAAQC,IAAI,6BAENK,sBAAwBH,SAASC,eAAe,oBAClDE,sBAAuB,CAEvBN,QAAQC,IAAI,+BAAgCK,uBAC5CA,sBAAsBC,UAAY,GAElCC,MAAM,yCAEAC,qBAAuB,iBACnBC,UAAYC,OAAOC,mBACrBC,aAAe,OAGd,IAAIC,EAAI,EAAGA,EAAIJ,UAAUK,WAAYD,IAAK,OACrCE,MAAQN,UAAUO,WAAWH,GAC7BI,UAAYf,SAASgB,cAAc,OACzCD,UAAUE,YAAYJ,MAAMK,iBAC5BR,cAAgBK,UAAUI,WAAaJ,UAAUK,eAGrDV,aAAeA,aAAaW,QAAQ,OAAQ,KAAKC,OAGjDzB,QAAQC,IAAI,iBAAkBY,cAET,KAAjBA,aAAqB,CAErBb,QAAQC,IAAI,8BAA+BY,oBAErCa,UAAYvB,SAASgB,cAAc,KACzCO,UAAUH,YAAcV,aACxBP,sBAAsBc,YAAYM,iBAE5BC,QAAUhB,OAAOiB,SAASC,iCAEpBhB,aAAcc,SACrBG,MAAKC,WACFvB,MAAM,sBAAwBuB,SAASC,kBAEvChC,QAAQC,IAAI,cAAegC,KAAKC,MAAMH,SAASI,mBAEzCC,UAAYH,KAAKC,MAAMH,SAASI,YAChCE,eAAiBlC,SAASgB,cAAc,KAC9CkB,eAAe9B,mJAEG6B,UAAUE,gFACNF,UAAUG,0FACJH,UAAUI,6FACbJ,UAAUK,wDAEnCnC,sBAAsBc,YAAYiB,mBAErCK,OAAMC,QAEH3C,QAAQ2C,MAAM,SAAUA,UAGhCxC,SAASyC,oBAAoB,UAAWnC,2BAGxCT,QAAQC,IAAI,qBAIpBE,SAASE,iBAAiB,UAAWI,sBAErCT,QAAQC,IAAI,mCAGZD,QAAQC,IAAI,uCAKpBD,QAAQC,IAAI"}