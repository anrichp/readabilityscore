{"version":3,"file":"main.min.js","sources":["../src/main.js"],"sourcesContent":["import { processText } from './repository';\n\n/**\n * Initialize the readability score functionality.\n */\nexport const init = () => {\n    const scanButton = document.getElementById('scan-button');\n    if (scanButton) {\n        scanButton.addEventListener('click', handleScanButtonClick);\n    } else {\n        // eslint-disable-next-line no-console\n        console.log('scanButton not found');\n    }\n};\n\n/**\n * Handle the scan button click event.\n */\nfunction handleScanButtonClick() {\n    const resultContainer = document.getElementById('readability-result');\n    if (resultContainer) {\n        resultContainer.innerHTML = ''; // Clear existing content\n        alert('Please select text on the page to analyze its readability.');\n        document.addEventListener('mouseup', textSelectionHandler);\n    } else {\n        // eslint-disable-next-line no-console\n        console.log('resultContainer not found');\n    }\n}\n\n/**\n * Handle the text selection event.\n */\nfunction textSelectionHandler() {\n    const selection = window.getSelection();\n    const selectedText = getSelectedText(selection);\n\n    if (selectedText !== '') {\n        const pageUrl = window.location.href;\n\n        processText(selectedText, pageUrl)\n            .then(handleProcessTextResponse)\n            .catch((error) => {\n                // eslint-disable-next-line no-console\n                console.error('Error:', error);\n            });\n\n        document.removeEventListener('mouseup', textSelectionHandler);\n    }\n}\n\n/**\n * Get the selected text from the selection object.\n * @param {Selection} selection - The selection object.\n * @returns {string} The selected text.\n */\nfunction getSelectedText(selection) {\n    let selectedText = '';\n    for (let i = 0; i < selection.rangeCount; i++) {\n        const range = selection.getRangeAt(i);\n        const container = document.createElement('div');\n        container.appendChild(range.cloneContents());\n        selectedText += container.innerText || container.textContent;\n    }\n    return selectedText.replace(/\\s+/g, ' ').trim();\n}\n\n/**\n * Handle the response from processing the text.\n * @param {Object} response - The response object from processText.\n */\nfunction handleProcessTextResponse(response) {\n    const resultContainer = document.getElementById('readability-result');\n    const score = response.readabilityscore;\n    const difficultyLevel = getDifficultyLevel(score);\n    const resultParagraph = document.createElement('p');\n    resultParagraph.innerHTML = `\n        <strong>Readability Score:</strong> ${score}<br>\n        <strong>Difficulty Level:</strong> ${difficultyLevel}\n    `;\n    resultContainer.appendChild(resultParagraph);\n}\n\n/**\n * Get the difficulty level based on the readability score.\n * @param {number} score - The readability score.\n * @returns {string} The difficulty level description.\n */\nfunction getDifficultyLevel(score) {\n    if (score <= 6) { return \"Very Easy\"; }\n    if (score <= 8) { return \"Easy\"; }\n    if (score <= 10) { return \"Fairly Easy\"; }\n    if (score <= 12) { return \"Standard\"; }\n    if (score <= 14) { return \"Fairly Difficult\"; }\n    if (score <= 18) { return \"Difficult\"; }\n    return \"Very Difficult\";\n}"],"names":["handleScanButtonClick","resultContainer","document","getElementById","innerHTML","alert","addEventListener","textSelectionHandler","console","log","selectedText","selection","i","rangeCount","range","getRangeAt","container","createElement","appendChild","cloneContents","innerText","textContent","replace","trim","getSelectedText","window","getSelection","pageUrl","location","href","then","handleProcessTextResponse","catch","error","removeEventListener","response","score","readabilityscore","difficultyLevel","getDifficultyLevel","resultParagraph","scanButton"],"mappings":"sLAkBSA,8BACCC,gBAAkBC,SAASC,eAAe,sBAC5CF,iBACAA,gBAAgBG,UAAY,GAC5BC,MAAM,8DACNH,SAASI,iBAAiB,UAAWC,uBAGrCC,QAAQC,IAAI,sCAOXF,6BAECG,sBAqBeC,eACjBD,aAAe,OACd,IAAIE,EAAI,EAAGA,EAAID,UAAUE,WAAYD,IAAK,OACrCE,MAAQH,UAAUI,WAAWH,GAC7BI,UAAYd,SAASe,cAAc,OACzCD,UAAUE,YAAYJ,MAAMK,iBAC5BT,cAAgBM,UAAUI,WAAaJ,UAAUK,mBAE9CX,aAAaY,QAAQ,OAAQ,KAAKC,OA7BpBC,CADHC,OAAOC,mBAGJ,KAAjBhB,aAAqB,OACfiB,QAAUF,OAAOG,SAASC,iCAEpBnB,aAAciB,SACrBG,KAAKC,2BACLC,OAAOC,QAEJzB,QAAQyB,MAAM,SAAUA,UAGhC/B,SAASgC,oBAAoB,UAAW3B,gCAwBvCwB,0BAA0BI,gBACzBlC,gBAAkBC,SAASC,eAAe,sBAC1CiC,MAAQD,SAASE,iBACjBC,yBAckBF,UACpBA,OAAS,QAAY,eACrBA,OAAS,QAAY,UACrBA,OAAS,SAAa,iBACtBA,OAAS,SAAa,cACtBA,OAAS,SAAa,sBACtBA,OAAS,SAAa,kBACnB,iBArBiBG,CAAmBH,OACrCI,gBAAkBtC,SAASe,cAAc,KAC/CuB,gBAAgBpC,kEAC0BgC,kEACDE,0BAEzCrC,gBAAgBiB,YAAYsB,+BA3EZ,WACVC,WAAavC,SAASC,eAAe,eACvCsC,WACAA,WAAWnC,iBAAiB,QAASN,uBAGrCQ,QAAQC,IAAI"}