define("block_readabilityscore/main",["exports","./repository"],(function(_exports,_repository){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0;function handleScanButtonClick(){const resultContainer=document.getElementById("readability-result"),instructionElement=document.getElementById("readability-instruction");resultContainer&&instructionElement?(resultContainer.innerHTML="",function(instructionElement){instructionElement.style.display="block",instructionElement.style.position="fixed",instructionElement.style.zIndex="100000";const viewportWidth=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),viewportHeight=Math.max(document.documentElement.clientHeight||0,window.innerHeight||0);instructionElement.style.left="".concat(viewportWidth/2-instructionElement.offsetWidth/2,"px"),instructionElement.style.top="".concat(viewportHeight/2-instructionElement.offsetHeight/2,"px")}(instructionElement),document.addEventListener("mouseup",textSelectionHandler),document.addEventListener("mousemove",(e=>positionInstruction(instructionElement,e)))):console.error("Result container or instruction element not found")}function positionInstruction(instructionElement,e){instructionElement.style.left="".concat(e.clientX+10,"px"),instructionElement.style.top="".concat(e.clientY+10,"px")}function textSelectionHandler(){const selectedText=function(selection){let selectedText="";for(let i=0;i<selection.rangeCount;i++){const range=selection.getRangeAt(i),container=document.createElement("div");container.appendChild(range.cloneContents()),selectedText+=container.innerText||container.textContent}return selectedText.replace(/\s+/g," ").trim()}(window.getSelection());if(""!==selectedText){const pageUrl=window.location.href;(0,_repository.processText)(selectedText,pageUrl).then(handleProcessTextResponse).catch((error=>{console.error("Error:",error)})),document.removeEventListener("mouseup",textSelectionHandler),document.removeEventListener("mousemove",(e=>positionInstruction(document.getElementById("readability-instruction"),e)));const instructionElement=document.getElementById("readability-instruction");instructionElement&&(instructionElement.style.display="none")}}function handleProcessTextResponse(response){const resultContainer=document.getElementById("readability-result"),score=response.readabilityscore,difficultyLevel=function(score){if(score<=6)return"Easy - Readable by a 6th grader";if(score<=7)return"Fairly Easy - Readable by a 7th grader";if(score<=8)return"Standard - Readable by an 8th grader";if(score<=9)return"Fairly Difficult - Readable by a high school freshman";if(score<=10)return"Difficult - Readable by a high school sophomore";if(score<=11)return"Difficult - Readable by a high school junior";if(score<=12)return"Very Difficult - Readable by a high school senior";if(score<=16)return"College Level - Readable by college students";return"Graduate Level - Readable by college graduates"}(score),resultParagraph=document.createElement("p");if(resultParagraph.innerHTML="\n        <strong>Readability Score:</strong> ".concat(score,"<br>\n        <strong>Difficulty Level:</strong> ").concat(difficultyLevel,"\n    "),resultContainer.appendChild(resultParagraph),response.remediationSuggestions&&response.remediationSuggestions.length>0){const suggestionsHeader=document.createElement("h4");suggestionsHeader.textContent="Remediation Suggestions:",resultContainer.appendChild(suggestionsHeader);const suggestionsList=document.createElement("ul");response.remediationSuggestions.forEach((suggestion=>{const listItem=document.createElement("li");listItem.textContent=suggestion,suggestionsList.appendChild(listItem)})),resultContainer.appendChild(suggestionsList)}}_exports.init=()=>{const scanButton=document.getElementById("scan-button");scanButton?scanButton.addEventListener("click",handleScanButtonClick):console.error("Scan button not found");const instructionElement=document.createElement("div");instructionElement.id="readability-instruction",instructionElement.style.display="none",instructionElement.innerHTML="Please select text on the page to analyze its readability.",document.body.appendChild(instructionElement)}}));

//# sourceMappingURL=main.min.js.map